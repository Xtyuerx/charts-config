### 数据结构约定
```json
{
  "code": 0,
  "message": "OK",
  "data": {}
}
```

### 后端职责范围（当前阶段）
- 仅持久化图表配置（ChartConfigDTO），`dataSource` 只存映射 ID（或标识）。
- 不返回表格明细数据（tableData/columns），这些数据由前端现有表格直接读取。
- 可选：服务端可返回主题/图表类型枚举，但非必需。

### 资源与类型
- ChartConfigDTO（与前端一致）
```json
{
  "id": "string",
  "title": "string",
  "type": "bar | line | pie",
  "subType": "bar_group | bar_stacked | bar_percent | line | line_smooth | pie | pie_donut",
  "theme": { "name": "string", "colors": ["#1890ff"] },
  "xField": "string",
  "categorySort": "asc | desc",
  "valueFields": ["string"],
  "categoryField": "string?",
  "dataSource": 0,
  "legend": { "show": true, "position": "top" },
  "label": { "show": true, "position": "top" },
  "yAxis": { "show": true, "title": "string", "min": 0, "max": 1000, "tickCount": 5, "interval": 200 },
  "xAxis": { "show": true, "title": "string" },
  "grid": { "show": true }
}
```
- DataSourceDTO（当前阶段由前端维护，不需要服务端返回，以下为可选占位结构，勿包含 tableData/columns）
```json
{
  "label": "string",
  "value": 0,
  "remark?": "仅用于展示/枚举的可选信息（非必需）"
}
```
- ThemeDTO
```json
{ "name": "经典蓝绿黄红", "colors": ["#1890ff", "#13c2c2", "#2fc25b", "#facc14", "#f04864"] }
```

### 接口列表
- 获取图表列表
  - GET `/api/charts`
  - resp.data: `ChartConfigDTO[]`
- 获取单个图表
  - GET `/api/charts/{id}`
  - resp.data: `ChartConfigDTO`
- 新建图表
  - POST `/api/charts`
  - req.body: `ChartConfigDTO`（`id`可空，后端生成）
  - resp.data: `ChartConfigDTO`
- 更新图表
  - PUT `/api/charts/{id}`
  - req.body: `ChartConfigDTO`
  - resp.data: `ChartConfigDTO`
- 删除图表
  - DELETE `/api/charts/{id}`
  - resp.data: `{ "deleted": true }`

（以下接口为可选，当前阶段不要求实现）
- 获取数据源列表
  - GET `/api/data-sources`
  - resp.data: `DataSourceDTO[]`
- 获取单个数据源
  - GET `/api/data-sources/{id}`
  - resp.data: `DataSourceDTO`
- 获取主题
  - GET `/api/themes`
  - resp.data: `ThemeDTO[]`
- 获取支持的图表/子类型
  - GET `/api/chart-types`
  - resp.data: `{ "bar": string[], "line": string[], "pie": string[] }`

### 可交付 Mock 数据（当前阶段建议仅提供 charts）
- charts.json
```json
{
  "code": 0,
  "message": "OK",
  "data": [
    {
      "id": "chart_0001",
      "title": "伦敦/柏林-品类销量",
      "type": "bar",
      "subType": "bar_group",
      "theme": { "name": "经典蓝绿黄红", "colors": ["#1890ff", "#13c2c2", "#2fc25b", "#facc14", "#f04864"] },
      "xField": "genre",
      "categorySort": "asc",
      "valueFields": ["sold"],
      "categoryField": "name",
      "dataSource": 0,
      "legend": { "show": true, "position": "top" },
      "label": { "show": true, "position": "top" },
      "yAxis": { "show": true, "title": "销售量", "min": 0, "max": 1000, "tickCount": 5, "interval": 200 },
      "xAxis": { "show": true, "title": "类型" },
      "grid": { "show": true }
    },
    {
      "id": "chart_0002",
      "title": "多序列-百分比堆叠",
      "type": "bar",
      "subType": "bar_percent",
      "theme": { "name": "AntV 默认", "colors": ["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A"] },
      "xField": "genre",
      "categorySort": "asc",
      "valueFields": ["sold", "return"],
      "categoryField": "name",
      "dataSource": 0,
      "legend": { "show": true, "position": "top-right" },
      "label": { "show": true, "position": "top" },
      "yAxis": { "show": true, "title": "占比(%)" },
      "xAxis": { "show": true, "title": "类型" },
      "grid": { "show": true }
    },
    {
      "id": "chart_0003",
      "title": "饼图-各类型占比",
      "type": "pie",
      "subType": "pie_donut",
      "theme": { "name": "森系绿灰", "colors": ["#344E41","#3A5A40","#588157","#A3B18A","#DAD7CD"] },
      "xField": "genre",
      "valueFields": ["sold"],
      "dataSource": 0,
      "legend": { "show": true, "position": "right" },
      "label": { "show": true, "position": "inside" },
      "yAxis": { "show": false },
      "xAxis": { "show": false },
      "grid": { "show": false }
    }
  ]
}
```

- data-sources.json
```json
{
  "code": 0,
  "message": "OK",
  "data": [
    {
      "label": "数据集",
      "value": 0,
      "tableData": [
        { "name": "London", "genre": "运动", "sold": 275, "return": 12 },
        { "name": "London", "genre": "策略", "sold": 115, "return": 6 },
        { "name": "London", "genre": "射击", "sold": 350, "return": 14 },
        { "name": "Berlin", "genre": "运动", "sold": 120, "return": 5 },
        { "name": "Berlin", "genre": "策略", "sold": 350, "return": 10 },
        { "name": "Berlin", "genre": "射击", "sold": 200, "return": 8 }
      ],
      "columns": [
        { "label": "城市", "prop": "name", "type": "string" },
        { "label": "类型", "prop": "genre", "type": "string" },
        { "label": "销售量", "prop": "sold", "type": "number" },
        { "label": "退货量", "prop": "return", "type": "number" }
      ]
    }
  ]
}
```

- themes.json（可选）
```json
{
  "code": 0,
  "message": "OK",
  "data": [
    { "name": "经典蓝绿黄红", "colors": ["#1890ff", "#13c2c2", "#2fc25b", "#facc14", "#f04864"] },
    { "name": "多彩鲜艳", "colors": ["#722ed1", "#eb2f96", "#fa8c16", "#13c2c2", "#52c41a"] },
    { "name": "AntV 默认", "colors": ["#5B8FF9", "#5AD8A6", "#5D7092", "#F6BD16", "#E8684A"] },
    { "name": "森系绿灰", "colors": ["#344E41", "#3A5A40", "#588157", "#A3B18A", "#DAD7CD"] }
  ]
}
```

- chart-types.json（可选）
```json
{
  "code": 0,
  "message": "OK",
  "data": {
    "bar": ["bar_group", "bar_stacked", "bar_percent"],
    "line": ["line", "line_smooth"],
    "pie": ["pie", "pie_donut"]
  }
}
```

如果用 json-server 的单个 db.json（建议，仅保留 charts 资源；dataSources/themes/chartTypes 可不提供）
```json
{
  "charts": [
    {
      "id": "chart_0001",
      "title": "伦敦/柏林-品类销量",
      "type": "bar",
      "subType": "bar_group",
      "theme": { "name": "经典蓝绿黄红", "colors": ["#1890ff", "#13c2c2", "#2fc25b", "#facc14", "#f04864"] },
      "xField": "genre",
      "categorySort": "asc",
      "valueFields": ["sold"],
      "categoryField": "name",
      "dataSource": 0,
      "legend": { "show": true, "position": "top" },
      "label": { "show": true, "position": "top" },
      "yAxis": { "show": true, "title": "销售量", "min": 0, "max": 1000, "tickCount": 5, "interval": 200 },
      "xAxis": { "show": true, "title": "类型" },
      "grid": { "show": true }
    }
  ],
  "dataSources": [
    {
      "label": "数据集",
      "value": 0,
      "tableData": [
        { "name": "London", "genre": "运动", "sold": 275, "return": 12 },
        { "name": "London", "genre": "策略", "sold": 115, "return": 6 },
        { "name": "London", "genre": "射击", "sold": 350, "return": 14 },
        { "name": "Berlin", "genre": "运动", "sold": 120, "return": 5 },
        { "name": "Berlin", "genre": "策略", "sold": 350, "return": 10 },
        { "name": "Berlin", "genre": "射击", "sold": 200, "return": 8 }
      ],
      "columns": [
        { "label": "城市", "prop": "name", "type": "string" },
        { "label": "类型", "prop": "genre", "type": "string" },
        { "label": "销售量", "prop": "sold", "type": "number" },
        { "label": "退货量", "prop": "return", "type": "number" }
      ]
    }
  ],
  "themes": [
    { "name": "经典蓝绿黄红", "colors": ["#1890ff", "#13c2c2", "#2fc25b", "#facc14", "#f04864"] },
    { "name": "AntV 默认", "colors": ["#5B8FF9", "#5AD8A6", "#5D7092", "#F6BD16", "#E8684A"] }
  ],
  "chartTypes": {
    "bar": ["bar_group", "bar_stacked", "bar_percent"],
    "line": ["line", "line_smooth"],
    "pie": ["pie", "pie_donut"]
  }
}
```

可选：自定义错误示例
```json
{ "code": 1001, "message": "参数错误: xField 不能为空", "data": null }
```